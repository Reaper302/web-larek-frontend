# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/styles/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```


**В проекте используется архитектура MVP**

**Основные интерфейсы**

Интерфейс **ProductItem** представляет продукт в магазине. Он содержит информацию о продукте, такую как идентификатор, описание, изображение, название, категория и цена. Предоставляет метод для получения детальной информации о продукте.

- **Свойства:**
  - `id`: Уникальный идентификатор продукта.
  - `description`: Описание продукта.
  - `image`: Ссылка на изображение продукта.
  - `title`: Название продукта.
  - `category`: Категория продукта.
  - `price`: Цена продукта, может быть `null`.

Интерфейс **Order** представляет заказ в магазине. Он включает информацию о способе оплаты, контактных данных клиента, адресе доставки, общей стоимости и списке продуктов. Предоставляет метод для получения общей стоимости заказа.

- **Свойства:**
  - `payment`: Метод оплаты заказа (онлайн или офлайн).
  - `email`: Электронная почта клиента.
  - `phone`: Телефон клиента.
  - `address`: Адрес доставки.
  - `total`: Общая стоимость заказа.
  - `items`: Список идентификаторов продуктов в заказе.

**Интерфейсы и Классы Model**

Интерфейс **IApiModel** описывает структуру модели для работы с API, которая включает методы для получения списка продуктов и отправки заказа на сервер.

Свойства:

cdn: Строка, представляющая базовый URL для загрузки изображений продуктов.
items: Массив объектов типа ProductItem, представляющих список товаров, полученных с API.
Методы:

fetchProductCards(): Асинхронный метод, который запрашивает список продуктов с API. Возвращает Promise, содержащий массив объектов ProductItem, где каждое изображение продукта обновлено до полного URL с использованием cdn.

submitOrder(order: Order): Асинхронный метод, который отправляет заказ на сервер. Принимает объект Order и возвращает Promise, содержащий объект OrderSuccessResponse, представляющий результат успешного заказа.

Интерфейс **IDataModel** описывает модель данных для работы с продуктами и предпросмотром выбранного товара. Он включает свойства и методы для управления списком продуктов и выбора карточки продукта.

Свойства:

productCards: Массив объектов типа ProductItem, представляющий список продуктов.
selectedCard: Объект типа ProductItem, представляющий выбранный продукт, или null, если ничего не выбрано.
Методы:

setPreview(item: ProductItem): Устанавливает выбранную карточку продукта и инициирует событие открытия модального окна с информацией о выбранном товаре.

Интерфейс **IBasketModel** описывает модель для работы с корзиной покупок. Он включает свойства и методы для управления продуктами в корзине, получения их количества и общей стоимости, а также для добавления, удаления и очистки корзины.

Свойства:

basketProducts: Массив объектов типа ProductItem, представляющий список продуктов, добавленных в корзину.
Методы:

getCount(): Возвращает количество продуктов в корзине.
getTotalSum(): Возвращает общую стоимость всех продуктов в корзине.
addProduct(item: ProductItem): Добавляет продукт в корзину.
removeProduct(item: ProductItem): Удаляет продукт из корзины.
clearBasket(): Очищает корзину от всех продуктов.

Интерфейс **IFormModel** описывает структуру модели формы заказа, которая управляет данными клиента, адресом доставки, методами валидации и процессом создания заказа.

Свойства:

payment: Строка, представляющая выбранный метод оплаты.
email: Электронная почта клиента.
phone: Номер телефона клиента.
address: Адрес доставки.
total: Общая стоимость заказа.
items: Массив идентификаторов продуктов, включенных в заказ.

Методы:

updateAddress(field: string, value: string): Обновляет адрес доставки. Принимает название поля и его значение, чтобы сохранить обновленное значение в модели.

validateOrder(): Проверяет корректность данных заказа (адрес, метод оплаты). Возвращает true, если данные валидны, или false, если найдены ошибки.

updateContactInfo(field: string, value: string): Обновляет контактную информацию (email или телефон). Принимает название поля и значение для его обновления.

validateContactInfo(): Валидирует контактную информацию (email и телефон). Возвращает true, если данные корректны, или false, если найдены ошибки.

createOrder(): Создает объект заказа на основе введенных данных. Возвращает объект типа Order с информацией о заказе.а основе введенных данных. Возвращает объект типа Order с информацией о заказе.


Класс **ApiModel** предоставляет методы для взаимодействия с API для получения данных о продуктах и отправки заказов. Наследует базовые методы от класса Api.

Свойства:

cdn: Строка, представляющая базовый URL для изображений продуктов.
items: Массив объектов типа ProductItem, представляющих продукты, полученные от API.

Класс **DataModel** управляет данными о продуктах, включая список карточек продуктов и выбранную карточку для предпросмотра. Он взаимодействует с событиями через интерфейс IEvents.

Свойства:

_productCards: Приватное свойство, представляющее массив объектов типа ProductItem.
selectedCard: Публичное свойство, содержащее выбранный объект типа ProductItem или null, если карточка не выбрана.

Класс **BasketModel** управляет данными корзины, включая добавление, удаление продуктов и подсчет общей суммы товаров.

Свойства:

_basketProducts: Приватное свойство, представляющее массив объектов типа ProductItem, которые добавлены в корзину.
Методы:

get basketProducts(): Возвращает копию массива продуктов, добавленных в корзину.
getCount(): Возвращает количество продуктов в корзине.
getTotalSum(): Возвращает общую стоимость всех продуктов в корзине, если корзина не пуста, иначе возвращает 0.
addProduct(item: ProductItem): Добавляет продукт в корзину, если его там нет.
removeProduct(item: ProductItem): Удаляет продукт из корзины.
clearBasket(): Очищает корзину, если в ней есть товары.

Класс FormModel управляет данными формы заказа, включая информацию о клиенте и способе оплаты. Он также валидирует введенные данные и уведомляет об ошибках через события.

Свойства:

payment: Метод оплаты, выбранный пользователем (строка).
email: Адрес электронной почты клиента (строка).
phone: Номер телефона клиента (строка).
address: Адрес доставки (строка).
total: Общая сумма заказа (число).
items: Массив идентификаторов продуктов в заказе (строка).

 **Интерфейсы и классы View**

Интерфейс **IModal** описывает функционал для управления модальным окном. Он предоставляет методы для открытия, закрытия, отображения контента модального окна, а также для блокировки или разблокировки прокрутки страницы при открытом модальном окне.

Методы:

open(): Открывает модальное окно.
close(): Закрывает модальное окно.
render(): Возвращает HTML-элемент модального окна для его отображения на странице.
setContent(content: HTMLElement | string): Устанавливает содержимое модального окна, которое может быть в виде HTML-элемента или строки.
setLocked(isLocked: boolean): Блокирует или разблокирует прокрутку страницы, когда модальное окно открыто.

Интерфейс **IOrderContacts** описывает структуру формы для ввода контактной информации при оформлении заказа. Он включает элементы HTML, используемые для взаимодействия с пользователем.

Методы:

formElement: HTML-форма для ввода контактной информации.
inputs: Массив полей ввода (HTMLInputElement) для получения контактных данных.
submitButton: Кнопка отправки формы.
errorContainer: Контейнер для отображения сообщений об ошибках.
render(): Возвращает HTML-элемент формы для отображения на странице.

Интерфейс **IOrder** описывает структуру формы для оформления заказа и выбора метода оплаты.

Методы:

formElement: HTML-форма для оформления заказа.
paymentButtons: Массив кнопок для выбора метода оплаты.
paymentMethod: Строка, представляющая выбранный метод оплаты.
errorContainer: Контейнер для отображения ошибок при оформлении заказа.
render(): Возвращает HTML-элемент формы для отображения на странице.

Интерфейс **IOrderSuccess** описывает структуру экрана, отображающего сообщение об успешном оформлении заказа.



Класс **Basket** отвечает за отображение и управление корзиной покупок, включая список товаров, общую стоимость и кнопки для открытия заказа и корзины.

Свойства:

basket: Корневой элемент корзины (HTMLElement).
modalTitle: Заголовок модального окна корзины (HTMLElement).
basketList: Список товаров в корзине (HTMLElement).
basketButton: Кнопка для перехода к оформлению заказа (HTMLButtonElement).
basketPrice: Элемент для отображения общей стоимости товаров (HTMLElement).
headerBasketButton: Кнопка в заголовке для открытия корзины (HTMLButtonElement).
headerBasket: Элемент для отображения количества товаров в корзине (HTMLElement).

Класс **BasketItem** представляет отдельный элемент в корзине, отображая информацию о товаре, его цену и кнопку для удаления.

Свойства:

basketItem: Корневой элемент товара в корзине (HTMLElement).
title: Элемент для отображения названия товара (HTMLElement).
price: Элемент для отображения цены товара (HTMLElement).
buttonDelete: Кнопка для удаления товара из корзины (HTMLButtonElement).

Класс **Card** представляет собой карточку товара с элементами, такими как категория, заголовок, изображение и цена. Он также предоставляет методы для обновления этих элементов.

Свойства:

cardElement: Корневой элемент карточки (HTMLElement).
categoryElement: Элемент для отображения категории товара (HTMLElement).
titleElement: Элемент для отображения названия товара (HTMLElement).
imageElement: Элемент изображения товара (HTMLImageElement).
priceElement: Элемент для отображения цены товара (HTMLElement).

Класс **CardPreview** расширяет функциональность класса Card, добавляя элементы для описания товара и кнопку для добавления товара в корзину.

Свойства:

descriptionElement: Элемент для отображения описания товара (HTMLElement).
actionButton: Кнопка для добавления товара в корзину (HTMLElement).

Класс **Modal** реализует интерфейс IModal, предоставляя функциональность для управления модальными окнами, включая открытие, закрытие, установку контента и блокировку страницы.

Свойства:

closeButton: Кнопка закрытия модального окна (HTMLButtonElement).
contentContainer: Контейнер для содержимого модального окна (HTMLElement).
pageWrapper: Элемент, оборачивающий страницу, для блокировки при открытом модальном окне (HTMLElement).

Класс **OrderContacts** реализует интерфейс IOrderContacts и управляет формой контактной информации для заказа. Он обрабатывает ввод данных пользователем и отправку формы.

Свойства:

formElement: HTML-элемент формы (HTMLFormElement).
inputs: Массив элементов ввода (HTMLInputElement[]).
submitButton: Кнопка отправки формы (HTMLButtonElement).
errorContainer: Контейнер для отображения ошибок (HTMLElement).

Класс **Order** реализует интерфейс IOrder и управляет формой заказа, включая выбор метода оплаты и обработку ввода адреса.

Свойства:

formElement: HTML-элемент формы (HTMLFormElement).
paymentButtons: Массив кнопок выбора метода оплаты (HTMLButtonElement[]).
submitButton: Кнопка отправки заказа (HTMLButtonElement).
errorContainer: Контейнер для отображения ошибок (HTMLElement).
paymentMethod: Метод оплаты (string).

Класс **OrderSuccess** реализует интерфейс IOrderSuccess и управляет отображением сообщения об успешном завершении заказа. Он отображает итоговую сумму и предоставляет возможность закрыть уведомление.

Свойства:

successElement: HTML-элемент, представляющий успешное сообщение (HTMLElement).
descriptionElement: Элемент, в котором отображается описание успеха (HTMLElement).
closeButton: Кнопка для закрытия сообщения об успехе (HTMLButtonElement).