# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/styles/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```


**Model**

**Основные интерфейсы**

Интерфейс **ProductItem** представляет продукт в магазине. Он содержит информацию о продукте, такую как идентификатор, описание, изображение, название, категория и цена. Предоставляет метод для получения детальной информации о продукте.

- **Свойства:**
  - `id`: Уникальный идентификатор продукта.
  - `description`: Описание продукта.
  - `image`: Ссылка на изображение продукта.
  - `title`: Название продукта.
  - `category`: Категория продукта.
  - `price`: Цена продукта, может быть `null`.

Интерфейс **Order** представляет заказ в магазине. Он включает информацию о способе оплаты, контактных данных клиента, адресе доставки, общей стоимости и списке продуктов. Предоставляет метод для получения общей стоимости заказа.

- **Свойства:**
  - `payment`: Метод оплаты заказа (онлайн или офлайн).
  - `email`: Электронная почта клиента.
  - `phone`: Телефон клиента.
  - `address`: Адрес доставки.
  - `total`: Общая стоимость заказа.
  - `items`: Список идентификаторов продуктов в заказе.

**Классы**

Класс **ApiModel** наследует от класса **Api** и предоставляет методы для взаимодействия с API для получения данных о продуктах и отправки заказов.

Свойства:

- `cdn`: Строка, представляющая базовый URL для изображений продуктов.
- `items`: Массив объектов ProductItem, представляющих продукты, полученные от API.
Методы:

- `fetchProductCards()`: Получает список продуктов с API, добавляет к ним ссылки на изображения через cdn, возвращает массив объектов ProductItem.
- `submitOrder()`: Отправляет заказ на сервер и возвращает объект OrderSuccessResponse с результатом.

-Класс **DataModel** управляет списком продуктов и выбранной карточкой

Свойства:

- `productCards`: Массив объектов ProductItem, представляющих продукты, доступные для отображения.
- `selectedCard`: Объект ProductItem, представляющий выбранную карточку продукта, или null, если ничего не выбрано.
Методы:

`setPreview()`: Устанавливает выбранную карточку продукта и инициирует событие открытия модального окна с информацией о продукте.

Класс **BasketModel** Управляет данными корзины, включая добавление и удаление продуктов.

Свойства:

`basketProducts`: Массив продуктов в корзине.

Методы:
- `addProduct()`: Добавляет продукт в корзину.
- `removeProduct()`: Удаляет продукт из корзины.
- `getTotalSum()`: Возвращает общую стоимость всех продуктов в корзине.
- `getCount()`: Возвращает количество продуктов в корзине.


Класс  **FormModel** Описание: Управляет данными формы заказа, включая данные клиента и способ оплаты.

Свойства:
- `payment`: Выбранный метод оплаты.
- `items`: Список идентификаторов продуктов в заказе.
- `total`: Общая стоимость заказа.
Методы:
- `updateAddress()`: Обновляет адрес доставки.
- `updateContactInfo()`: Обновляет контактную информацию клиента.
- `createOrder()`: Создает объект заказа для отправки на сервер.


 **View**

Класс **Card** представляет карточку продукта. Он используется для товара.

**Свойства:**

- `_cardElement`: Основной HTML элемент карточки.
- `_categoryElement`: Категория товара.
- `_titleElement`: Название товара.
- `_imageElement`: Изображение товара.
- `_priceElement`: Цена товара.

**Методы:**
`render()`: Отображает карточку продукта.
`_updateTextContent()`: Обновляет текстовое содержимое элемента.
`_formatPrice()`: Форматирует цену товара.


Класс **CardPreview** наследуется от **Card** и добавляет функциональность предпросмотра товара с возможностью добавления его в корзину.

Свойства:

- `_descriptionElement`: Описание товара.
- `_actionButton`: Кнопка действия (добавить в корзину).

Методы:

- `render()`: Отображает карточку товара с описанием и кнопкой действия.
- `description()`: Устанавливает описание товара.
- `_updateButtonText()`: Обновляет текст кнопки действия в зависимости от наличия цены.
---

Класс **Basket** представляет корзину покупок. Используется для управления отображением и взаимодействием с корзиной.

**Свойства:**

- `basket`: HTML элемент корзины.
- `title`: Заголовок корзины.
- `basketList`: Список товаров в корзине.
- `button`: Кнопка оформления заказа.
- `basketPrice`: Общая стоимость товаров.
- `headerBasketButton`: Кнопка корзины в заголовке.
- `headerBasketCounter`: Счетчик товаров в корзине.

**Методы:**

`render()`: Отображает корзину.
`set items()`: Обновляет список товаров в корзине.
`renderHeaderBasketCounter()`: Обновляет счетчик товаров в корзине.
`renderSumAllProducts()`: Обновляет общую стоимость товаров в корзине.

Класс **BasketItem** представляет отдельный товар в корзине и используется для управления его отображением и взаимодействием.

Свойства:

- `basketItem`: HTML элемент товара.
- `title`: Название товара.
- `price`: Цена товара.
- `buttonDelete`: Кнопка удаления товара.

- Методы:

`render()`: Отображает товар с данными продукта.
`formatPrice()`: Форматирует цену товара.

Класс **OrderContacts** представляет форму контактов. Она используется для ввода контактной информации.

**Свойства:**

`formElement`: HTML элемент формы.
`inputs`: Поля ввода формы.
`submitButton`: Кнопка отправки формы.
`errorContainer`: Контейнер для вывода ошибок.

**Методы:**
`render()`: Отображает форму оформления заказа.
`onSubmit(callback: (order: Order) => void)`: Устанавливает обработчик отправки формы.

Класс **OrderSuccess** Управляет отображением экрана успешного завершения заказа.
Свойства:

`template`: Шаблон для отображения экрана успеха.
Методы:

`render()`: Отображает экран успешного завершения заказа.

**Presenter**


Интерфейс **IEvents** описывает методы для управления событиями.

Методы:

`on()`: Подписывается на событие с обработчиком.
`emit()`: Инициирует событие с данными.
`trigger()`: Создает триггер события.


Класс **EventEmitter** реализует брокер событий, управляя подписками и событиями.

Свойства:

`_events`: Объект, хранящий подписки на события.

Методы:

`on()`: Подписывает обработчик на событие.
`off()`: Убирает обработчик с события.
`emit(`: Инициирует событие.
`onAll()`: Подписывается на все события.
`offAll()`: Убирает все подписки.
`trigger()`: Создает триггер события.






